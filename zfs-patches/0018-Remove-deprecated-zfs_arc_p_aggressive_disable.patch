From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Richard Elling <Richard.Elling@RichardElling.com>
Date: Wed, 7 Feb 2018 11:54:20 -0800
Subject: [PATCH] Remove deprecated zfs_arc_p_aggressive_disable
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

zfs_arc_p_aggressive_disable is no more. This PR removes docs
and module parameters for zfs_arc_p_aggressive_disable.

Reviewed-by: Giuseppe Di Natale <dinatale2@llnl.gov>
Reviewed by: George Melikov <mail@gmelikov.ru>
Reviewed-by: Brian Behlendorf <behlendorf1@llnl.gov>
Richard Elling <Richard.Elling@RichardElling.com>
Closes #7135

(cherry picked from commit a58e1284d8998b0d7e409a6ec009d9d372aad41b)
Signed-off-by: Fabian Gr√ºnbichler <f.gruenbichler@proxmox.com>
---
 module/zfs/arc.c                 |  4 ----
 man/man5/zfs-module-parameters.5 | 11 -----------
 2 files changed, 15 deletions(-)

diff --git a/module/zfs/arc.c b/module/zfs/arc.c
index 264e67735..9d1d0db1d 100644
--- a/module/zfs/arc.c
+++ b/module/zfs/arc.c
@@ -391,7 +391,6 @@ unsigned long zfs_arc_dnode_limit_percent = 10;
  */
 unsigned long zfs_arc_sys_free = 0;
 int zfs_arc_min_prefetch_lifespan = 0;
-int zfs_arc_p_aggressive_disable = 1;
 int zfs_arc_p_dampener_disable = 1;
 int zfs_arc_meta_prune = 10000;
 int zfs_arc_meta_strategy = ARC_STRATEGY_META_BALANCED;
@@ -7928,9 +7927,6 @@ MODULE_PARM_DESC(zfs_arc_meta_strategy, "Meta reclaim strategy");
 module_param(zfs_arc_grow_retry, int, 0644);
 MODULE_PARM_DESC(zfs_arc_grow_retry, "Seconds before growing arc size");
 
-module_param(zfs_arc_p_aggressive_disable, int, 0644);
-MODULE_PARM_DESC(zfs_arc_p_aggressive_disable, "disable aggressive arc_p grow");
-
 module_param(zfs_arc_p_dampener_disable, int, 0644);
 MODULE_PARM_DESC(zfs_arc_p_dampener_disable, "disable arc_p adapt dampener");
 
diff --git a/man/man5/zfs-module-parameters.5 b/man/man5/zfs-module-parameters.5
index 19e6becfd..d4daffde6 100644
--- a/man/man5/zfs-module-parameters.5
+++ b/man/man5/zfs-module-parameters.5
@@ -674,17 +674,6 @@ max arc_p
 Default value: \fB0\fR.
 .RE
 
-.sp
-.ne 2
-.na
-\fBzfs_arc_p_aggressive_disable\fR (int)
-.ad
-.RS 12n
-Disable aggressive arc_p growth
-.sp
-Use \fB1\fR for yes (default) and \fB0\fR to disable.
-.RE
-
 .sp
 .ne 2
 .na
-- 
2.14.2

